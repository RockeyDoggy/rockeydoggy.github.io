<!DOCTYPE html>
<html>
<head>
	<title>Autenticação Twitch</title>
	<script src="https://cdn.jsdelivr.net/npm/@supergrecko/twitch-js@2.0.0/dist/twitch.min.js"></script>
	<script>
		// Credenciais do cliente Twitch
		var client_id = 'wmvc2pcoaa2g2cno4ldyackeh3l8t7';
		var redirect_uri = 'https://rockeydoggy.github.io/test.html';

		// Função de autenticação da Twitch
		function authenticate() {
			Twitch.authenticate({
				client_id: client_id,
				redirect_uri: redirect_uri,
				scope: ['user_read'],
				response_type: 'token'
			});
		}

		// Função de tratamento do redirecionamento da Twitch
		function handleRedirect() {
			if (window.location.hash) {
				var hash = window.location.hash.substring(1);
				var accessToken = hash.split('&')[0].split('=')[1];

				Twitch.api({method: 'user'}, function(error, user) {
					if (error) {
						console.log(error);
					} else {
						var username = user.display_name;
						document.getElementById('username').innerHTML = username;
					}
				});
			}
		}
	</script>
</head>
<body onload="handleRedirect()">
	<h1>Autenticação Twitch</h1>
	<p>Clique no botão abaixo para autenticar pela Twitch:</p>
	<button onclick="authenticate()">Autenticar pela Twitch</button>
	<p>O usuário autenticado é: <span id="username"></span></p>
</body>
</html>
