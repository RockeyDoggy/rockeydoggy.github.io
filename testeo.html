<!DOCTYPE html>
<html>
<head>
    <title>Twitch Chat Example</title>
</head>
<body>
    <div id="messages"></div>
    <script>
        const clientId = 'aeokv71t4icy8xlltwctqyncyge315';
        const channel = 'RockeyDoggy';
        const accessToken = 'tk2y9uio5f58fq1tpm1hjg6nponmp7'; // Obtained after OAuth authorization

        const socket = new WebSocket('wss://irc-ws.chat.twitch.tv:443');
        
        socket.addEventListener('open', () => {
            // Authenticate and join the channel's chat
            socket.send(`PASS oauth:${accessToken}`);
            socket.send(`NICK ${channel}`);
            socket.send(`JOIN #${channel}`);
        });

        socket.addEventListener('message', event => {
            const message = event.data;
            // Parse message to identify point redemption messages
            if (message.match(pointRedemptionRegex)) {
                // Extract nick and message content
                const [, nick, content] = message.match(/^:([^!]+).*PRIVMSG #[^ ]+ :(.+)$/);
                
                // Fetch user avatar using Twitch API or use a cached version
                
                // Display the message and user details in the HTML
                const messagesDiv = document.getElementById('messages');
                const messageDiv = document.createElement('div');
                messageDiv.innerHTML = `
                    <img src="USER_AVATAR_URL" alt="${nick}'s Avatar">
                    <strong>${nick}:</strong> ${content}
                `;
                messagesDiv.appendChild(messageDiv);
                
                // Save the message and user details in your database or storage
            }
        });
    </script>
</body>
</html>
